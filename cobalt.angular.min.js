/*! cobalt-js - v0.6.6 - 2013-11-06 */
!function(){"use strict";angular.module("cb.directives",["cbSlider","cbTooltip","cbSelect","cbSelectReplace"]),angular.module("cb.utilities",["cb.directives"]),angular.module("cbSelect",[]).directive("cbSelect",function(){return{restrict:"A",scope:{ngModel:"=",options:"="},template:'<div class="cb-select" tabindex="0"><div class="cb-select-value" ng-click="select.open()" ng-class="{active: select.show}" title="{{ select.selectedItem[labelKey] }}"><span>{{ select.selectedItem[labelKey] || placeholder }}</span><i></i></div><div class="cb-select-options" ng-show="select.show"><div class="cb-select-option" ng-repeat="option in select.options" ng-click="select.selectOption(option)" ng-class="{active: option == select.selectedItem}">{{ option[labelKey] }}</div></div><select ng-hide="true"><option ng-repeat="o in select.options" value="{{ o[valueKey] }}" ng-selected="o[valueKey] == select.selectedItem[valueKey]">{{ o[labelKey] }}</option></select></div>',replace:!0,link:function(a,b,c){var d,e,f,g=-1;e={placeholder:"Select a value",labelKey:"label",valueKey:"value"},angular.extend(e,a.$eval(c.cbSelect)),a.valueKey=e.valueKey,a.labelKey=e.labelKey,a.placeholder=e.placeholder,d=a.options,f=a.select={show:!1,focused:!1,options:d,selectedItem:null,selectOption:function(a){g=jQuery.inArray(a,d),f.selectedItem=a,f.close()},toggle:function(){f.show=!f.show},open:function(){f.show=!0},close:function(){f.show=!1},scrollIntoView:function(){var a,c;a=b.find(".cb-select-options"),c=b.find(".cb-select-option").eq(g),c.position().top+c.outerHeight()>a.height()?a.scrollTop(a.scrollTop()+c.outerHeight()+c.position().top-a.height()):c.position().top<0&&a.scrollTop(a.scrollTop()+c.position().top)},nextOption:function(){g<d.length-1&&(f.selectedItem=d[++g],f.scrollIntoView())},prevOption:function(){g>0&&(f.selectedItem=d[--g],f.scrollIntoView())},keypress:function(a){40===a.keyCode?f.nextOption():38===a.keyCode?f.prevOption():13===a.keyCode&&f.toggle()}},a.$watch("select.selectedItem",function(b){b&&(a.ngModel=b)}),b.on("click",function(a){angular.element(a.target).hasClass("cb-select-option")||b.trigger("focus")}),b.on("focus",function(){a.$apply(function(){f.focused=!0,f.open()})}),b.on("focusout",function(){a.$apply(function(){f.focused=!1,f.close()})}),b.on("keydown",function(b){9!==b.keyCode&&b.preventDefault(),a.$apply(function(){f.keypress(b)})})}}}),angular.module("cbSelectReplace",[]).directive("cbSelectReplace",["$compile","$rootScope",function(){return{restrict:"CA",scope:!0,require:"?ngModel",compile:function(a){var b,c,d,e,f=[],g=0;return c="select"===a.get(0).nodeName.toLowerCase()?a:a.find("select"),d=c.attr("name")||"",e=c.attr("tabindex")||0,b='<div class="cb-select" tabindex="'+e+'">'+'<div class="cb-select-value" ng-click="select.open()" ng-class="{active: select.show}" title="{{ select.selectedItem.label }}"><span>{{ select.selectedItem.label }}</span><i></i></div>'+'<div class="cb-select-options" ng-show="select.show">'+'<div class="cb-select-option" ng-repeat="option in select.options" ng-mousedown="select.selectOption(option)" ng-class="{active: option == select.selectedItem}">{{ option.label }}</div>'+"</div>"+'<select ng-hide="true" name="'+d+'">'+'<option ng-repeat="o in select.options" value="{{ o.value }}" ng-selected="o.value == select.selectedItem.value">{{ o.label }}</option>'+"</select>"+"</div>",angular.forEach(c.find("option"),function(a,b){a=angular.element(a),f.push({label:a.text(),value:a.val()}),"selected"===a.attr("selected")&&(g=b)}),c.replaceWith(angular.element(b)),{pre:function(a,b,c,d){var e,h=g;e=a.select={show:!1,focused:!1,options:f,selectedItem:f[g],selectOption:function(a){h=jQuery.inArray(a,f),e.selectedItem=a,e.close(),d&&d.$setViewValue(a)},toggle:function(){e.show=!e.show},open:function(){e.show=!0},close:function(){e.show=!1},scrollIntoView:function(){var a,c;a=b.find(".cb-select-options"),c=b.find(".cb-select-option").eq(h),c.position().top+c.outerHeight()>a.height()?a.scrollTop(a.scrollTop()+c.outerHeight()+c.position().top-a.height()):c.position().top<0&&a.scrollTop(a.scrollTop()+c.position().top)},nextOption:function(){h<f.length-1&&(e.selectedItem=f[++h],e.scrollIntoView())},prevOption:function(){h>0&&(e.selectedItem=f[--h],e.scrollIntoView())},keypress:function(a){40===a.keyCode?e.nextOption():38===a.keyCode?e.prevOption():13===a.keyCode&&e.toggle()}},d&&(d.$render=function(){e.selectedItem=d.$viewValue}),b.on("click",function(){b.trigger("focus")}),b.on("focus",function(){a.$apply(function(){e.focused=!0,e.open()})}),b.on("focusout",function(){a.$apply(function(){e.focused=!1,e.close()})}),b.on("keydown",function(b){9!==b.keyCode&&b.preventDefault(),a.$apply(function(){e.keypress(b)})})}}}}}]),angular.module("cbSlider",[]).directive("cbSlider",["$timeout",function(a){return{restrict:"A",scope:!0,require:"ngModel",link:function(b,c,d,e){var f,g,h,i,j,k=null;g={defaultPage:0,perPage:1,collectionName:"pages",autoPlay:!1,initialDelay:7e3,delay:5e3,delayFlux:1e3},angular.extend(g,b.$eval(d.cbSlider)),i=b.slider={lastPage:null,left:null,currentPage:g.defaultPage,perPage:g.perPage,onPage:function(a){return a===i.currentPage},next:function(){h(),i.currentPage<i.lastPage&&(i.left=!0,i.currentPage++)},prev:function(){h(),i.currentPage>0&&(i.left=!1,i.currentPage--)},"goto":function(a){h(),a>=0&&a<=i.lastPage&&(i.left=i.currentPage<a?!0:!1,i.currentPage=a)}},e.$render=function(){var a=e.$modelValue;if(angular.isDefined(a)){if(i.lastPage=Math.ceil(a.length/g.perPage)-1,i.currentPage>i.lastPage&&(i.currentPage=i.lastPage),1===g.perPage)j=a;else{j=[];for(var b=0,c=a.length;c>b;b+=g.perPage)j.push(a.slice(b,b+g.perPage))}i[g.collectionName]=j}else i[g.collectionName]=null},f=function(){var b=(i.currentPage+1)%(i.lastPage+1);i.left=!0,i.currentPage=b,k=a(f,g.delay+Math.random()*g.delayFlux)},h=g.autoPlay?function(){null!==k&&(a.cancel(k),k=a(f,g.initialDelay))}:angular.noop,g.autoPlay===!0&&(k=a(f,g.initialDelay))}}}]),angular.module("cbTooltip",[]).directive("cbTooltip",["$compile","$document",function(a,b){return{restrict:"A",scope:{title:"@title",content:"@content"},compile:function(){return{post:function(c,d,e){var f,g,h,i,j,k,l,m,n;f={tpl:'<div class="cb-tooltip" ng-style="style" ng-show="show"><header ng-if="title">{{title}}</header><section>{{content}}</section></div>',tplArrow:'<div class="arrow" ng-style="arrowStyle"></div>',position:"top",space:8,content:":)"},g=c,angular.extend(f,c.$eval(e.cbTooltip)),g.position=f.position,g.space=f.space,g.tpl=f.tpl,g.show=!1,g.tplArrow=f.tplArrow,k=angular.element(g.tpl),l=angular.element(g.tplArrow),m=a(k)(c),n=a(l)(c),d.addClass("cb-tooltip-active"),m.append(n),m.addClass(g.position),b.find("body").append(m),h=g.show=function(){g.$apply(function(){g.show=!0}),j()},i=g.hide=function(){g.$apply(function(){g.show=!1})},j=function(){var a=d.offset(),b=d.outerWidth(!0),c=d.outerHeight(!0),e=m.outerWidth(!0),f=m.outerHeight(!0),h=n.outerWidth(!0),i=n.outerHeight(!0),j=0,k=0,l={};"top"===g.position?(j=a.top-f-g.space,l.left=e/2-h/2):"bottom"===g.position?(j=a.top+c+g.space,l.left=e/2-h/2):"left"===g.position?(k=a.left-e-g.space,l.top=f/2-i/2):"right"===g.position&&(k=a.left+b+g.space,l.top=f/2-i/2),("top"===g.position||"bottom"===g.position)&&(k=e>b?a.left-(e-b)/2:a.left+(b-e)/2),("left"===g.position||"right"===g.position)&&(j=f>c?a.top-(f-c)/2:a.top+(c-f)/2),g.$apply(function(){g.style={top:j,left:k},g.arrowStyle=l})},d.on("mouseenter",h),d.on("mouseleave",i),c.$on("$destroy",function(){m.remove()})}}}}}])}();