/*! cobalt-js - v0.1.3 - 2013-09-11 */
!function(){"use strict";angular.module("cb.directives",["cbSlider","cbTooltip"]),angular.module("cb.utilities",["cb.directives"]),angular.module("cbSlider",[]).directive("cbSlider",["$timeout",function(a){return{restrict:"A",scope:{collection:"=cbSliderData"},link:function(b,c,d){var e,f,g,h,i,j,k=null;g={currentPage:0,perPage:1,collectionName:"pages",autoPlay:!1,initialDelay:7e3,delay:5e3,delayFlux:1e3},angular.extend(g,b.$eval(d.cbSlider)),i=b.slider={currentPage:g.currentPage},b.$watch("collection",function(a){if(null===a)slide[g.collectionName]=null;else{if(e=Math.ceil(a.length/g.perPage)-1,1===g.perPage)j=a;else{j=[];for(var b=0,c=a.length;c>b;b+=g.perPage)j.push(a.slice(b,b+g.perPage))}i[g.collectionName]=j}}),f=function(){var b=(i.currentPage+1)%(e+1);i.left=!0,i.currentPage=b,k=a(f,g.delay+Math.random()*g.delayFlux)},h=function(){g.autoPlay&&null!==k&&(a.cancel(k),k=a(f,g.initialDelay))},i.next=function(){h(),i.currentPage<e&&(i.left=!0,i.currentPage++)},i.prev=function(){h(),i.currentPage>0&&(i.left=!1,i.currentPage--)},i.goto=function(a){h(),a>=0&&e>=a&&(i.left=i.currentPage<a?!0:!1,i.currentPage=a)},g.autoPlay===!0&&(k=a(f,g.initialDelay))}}}]),angular.module("cbTooltip",[]).directive("cbTooltip",function(){return{restrict:"A",scope:!0,compile:function(){return{post:function(a,b,c){var d,e,f,g,h;d='<div class="cb-tooltip"><div class="arrow"></div>{{header}}<section>{{content}}</section></div>',e=a.tooltip={tpl:c.tpl||d,position:c.position||"top",title:c.title,content:c.content,space:c.space||8},b.addClass("cb-tooltip-active"),f=function(){var a=e.tpl.replace(/\{\{content\}\}/gi,e.content);a=e.title?a.replace(/\{\{header\}\}/gi,"<header>"+e.title+"</header>"):a.replace(/\{\{header\}\}/gi,""),$("body").append(a),$(".cb-tooltip").addClass(e.position),h()},g=function(){$(".cb-tooltip").remove()},h=function(){var a=$(".cb-tooltip"),c=b.offset(),d=b.width(),f=b.height(),g=a.width(),h=a.height(),i=0,j=0;"top"===e.position?i=c.top-h-e.space:"bottom"===e.position?i=c.top+f+e.space:"left"===e.position?j=c.left-g-e.space:"right"===e.position&&(j=c.left+d+e.space),("top"===e.position||"bottom"===e.position)&&(j=g>d?c.left-(g-d)/2-e.space:c.left+(d-g)/2+e.space),("left"===e.position||"right"===e.position)&&(i=h>f?c.top-(h-f)/2-e.space:c.top+(f-h)/2+e.space),a.css({top:i,left:j,position:"absolute"})},b.on("mouseenter",f),b.on("mouseleave",g)}}}}})}();