/*! cobalt-js - v0.3.3 - 2013-09-25 */
!function(){"use strict";angular.module("cb.directives",["cbSlider","cbTooltip","cbSelect"]),angular.module("cb.utilities",["cb.directives"]),angular.module("cbSelect",[]).directive("cbSelect",function(){return{restrict:"A",scope:{options:"="},template:'<div class="cb-select" tabindex="-1"><div class="cb-select-value" ng-click="toggle()" ng-class="{active: show}"><span>{{ selectedItem[labelKey] || placeholder }}</span><i></i></div><div class="cb-select-options" ng-show="show"><div class="cb-select-option" ng-repeat="option in options" ng-click="select(option)" ng-class="{active: option == selectedItem}">{{ option[labelKey] }}</div></div><select><option ng-repeat="o in options" value="{{ o[valueKey] }}" ng-selected="o[valueKey] == selectedItem[valueKey]">{{ o[labelKey] }}</option></select></div>',replace:!0,require:"?ngModel",link:function(a,b,c,d){var e;e={placeholder:"Select a value",labelKey:"label",valueKey:"value"},angular.extend(e,a.$eval(c.cbSelect)),a.valueKey=e.valueKey,a.labelKey=e.labelKey,a.placeholder=e.placeholder,a.show=!1,d.$render=function(){a.selectedItem=d.$viewValue},a.select=function(b){a.selectedItem=b,a.show=!1,d.$setViewValue(b)},a.toggle=function(){a.show=!a.show},b.on("focusout",function(){a.$apply(function(){a.show=!1})})}}}),angular.module("cbSlider",[]).directive("cbSlider",["$timeout",function(a){return{restrict:"A",scope:{collection:"=cbSliderData"},link:function(b,c,d){var e,f,g,h,i,j,k=null;g={currentPage:0,perPage:1,collectionName:"pages",autoPlay:!1,initialDelay:7e3,delay:5e3,delayFlux:1e3},angular.extend(g,b.$eval(d.cbSlider)),i=b.slider={currentPage:g.currentPage},b.$watch("collection",function(a){if(null===a)slide[g.collectionName]=null;else{if(e=Math.ceil(a.length/g.perPage)-1,1===g.perPage)j=a;else{j=[];for(var b=0,c=a.length;c>b;b+=g.perPage)j.push(a.slice(b,b+g.perPage))}i[g.collectionName]=j}}),f=function(){var b=(i.currentPage+1)%(e+1);i.left=!0,i.currentPage=b,k=a(f,g.delay+Math.random()*g.delayFlux)},h=function(){g.autoPlay&&null!==k&&(a.cancel(k),k=a(f,g.initialDelay))},i.next=function(){h(),i.currentPage<e&&(i.left=!0,i.currentPage++)},i.prev=function(){h(),i.currentPage>0&&(i.left=!1,i.currentPage--)},i.goto=function(a){h(),a>=0&&e>=a&&(i.left=i.currentPage<a?!0:!1,i.currentPage=a)},g.autoPlay===!0&&(k=a(f,g.initialDelay))}}}]),angular.module("cbTooltip",[]).directive("cbTooltip",["$compile",function(a){return{restrict:"A",scope:{title:"@title",content:"@content"},compile:function(){return{post:function(b,c,d){var e,f,g,h,i,j,k,l,m;e={tpl:'<div class="cb-tooltip" ng-style="style" ng-show="show"><header ng-if="title">{{title}}</header><section>{{content}}</section></div>',tplArrow:'<div class="arrow" ng-style="arrowStyle"></div>',position:"top",space:8,content:":)"},f=b,angular.extend(e,b.$eval(d.cbTooltip)),f.position=e.position,f.space=e.space,f.tpl=e.tpl,f.show=!1,f.tplArrow=e.tplArrow,j=angular.element(f.tpl),k=angular.element(f.tplArrow),l=a(j)(b),m=a(k)(b),c.addClass("cb-tooltip-active"),l.append(m),l.addClass(f.position),angular.element(document.body).append(l),g=function(){f.$apply(function(){f.show=!0}),i()},h=function(){f.$apply(function(){f.show=!1})},i=function(){var a=c.offset(),b=c.outerWidth(!0),d=c.outerHeight(!0),e=l.outerWidth(!0),g=l.outerHeight(!0),h=m.outerWidth(!0),i=m.outerHeight(!0),j=0,k=0,n={};"top"===f.position?(j=a.top-g-f.space,n.left=e/2-h/2):"bottom"===f.position?(j=a.top+d+f.space,n.left=e/2-h/2):"left"===f.position?(k=a.left-e-f.space,n.top=g/2-i/2):"right"===f.position&&(k=a.left+b+f.space,n.top=g/2-i/2),("top"===f.position||"bottom"===f.position)&&(k=e>b?a.left-(e-b)/2:a.left+(b-e)/2),("left"===f.position||"right"===f.position)&&(j=g>d?a.top-(g-d)/2:a.top+(d-g)/2),f.$apply(function(){f.style={top:j,left:k},f.arrowStyle=n})},c.on("mouseenter",g),c.on("mouseleave",h)}}}}}])}();