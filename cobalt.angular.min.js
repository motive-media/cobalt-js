/*! cobalt-js - v0.6.3 - 2013-10-18 */
!function(){"use strict";angular.module("cb.directives",["cbSlider","cbTooltip","cbSelect","cbSelectReplace"]),angular.module("cb.utilities",["cb.directives"]),angular.module("cbSelect",[]).directive("cbSelect",function(){return{restrict:"A",scope:{options:"="},template:'<div class="cb-select" tabindex="0"><div class="cb-select-value" ng-click="select.open()" ng-class="{active: select.show}" title="{{ select.selectedItem[labelKey] }}"><span>{{ select.selectedItem[labelKey] || placeholder }}</span><i></i></div><div class="cb-select-options" ng-show="select.show"><div class="cb-select-option" ng-repeat="option in select.options" ng-click="select.selectOption(option)" ng-class="{active: option == select.selectedItem}">{{ option[labelKey] }}</div></div><select ng-hide="true"><option ng-repeat="o in select.options" value="{{ o[valueKey] }}" ng-selected="o[valueKey] == select.selectedItem[valueKey]">{{ o[labelKey] }}</option></select></div>',replace:!0,require:"?ngModel",link:function(a,b,c,d){var e,f,g,h=0;f={placeholder:"Select a value",labelKey:"label",valueKey:"value"},angular.extend(f,a.$eval(c.cbSelect)),a.valueKey=f.valueKey,a.labelKey=f.labelKey,a.placeholder=f.placeholder,a.show=!1,e=a.options,g=a.select={show:!1,focused:!1,options:e,selectedItem:e[0],selectOption:function(a){h=jQuery.inArray(a,e),g.selectedItem=a,g.close(),d&&d.$setViewValue(a)},toggle:function(){g.show=!g.show},open:function(){g.show=!0},close:function(){g.show=!1},scrollIntoView:function(){var a,c;a=b.find(".cb-select-options"),c=b.find(".cb-select-option").eq(h),c.position().top+c.outerHeight()>a.height()?a.scrollTop(a.scrollTop()+c.outerHeight()+c.position().top-a.height()):c.position().top<0&&a.scrollTop(a.scrollTop()+c.position().top)},nextOption:function(){h<e.length-1&&(g.selectedItem=e[++h],g.scrollIntoView())},prevOption:function(){h>0&&(g.selectedItem=e[--h],g.scrollIntoView())},keypress:function(a){40===a.keyCode?g.nextOption():38===a.keyCode?g.prevOption():13===a.keyCode&&g.toggle()}},d&&(d.$render=function(){a.selectedItem=d.$viewValue}),b.on("click",function(){b.trigger("focus")}),b.on("focus",function(){a.$apply(function(){g.open()})}),b.on("focusout",function(){a.$apply(function(){g.close()})}),b.on("keydown",function(b){9!==b.keyCode&&b.preventDefault(),a.$apply(function(){g.keypress(b)})})}}}),angular.module("cbSelectReplace",[]).directive("cbSelectReplace",function(){return{restrict:"CA",scope:!0,require:"?ngModel",compile:function(a){var b,c,d,e=[],f=0;return c="select"===a.get(0).nodeName.toLowerCase()?a:a.find("select"),d=c.attr("name"),b='<div class="cb-select" tabindex="0"><div class="cb-select-value" ng-click="select.open()" ng-class="{active: select.show}" title="{{ select.selectedItem.label }}"><span>{{ select.selectedItem.label }}</span><i></i></div><div class="cb-select-options" ng-show="select.show"><div class="cb-select-option" ng-repeat="option in select.options" ng-mousedown="select.selectOption(option)" ng-class="{active: option == select.selectedItem}">{{ option.label }}</div></div><select ng-hide="true" name="'+d+'">'+'<option ng-repeat="o in select.options" value="{{ o.value }}" ng-selected="o.value == select.selectedItem.value">{{ o.label }}</option>'+"</select>"+"</div>",angular.forEach(c.find("option"),function(a,b){a=angular.element(a),e.push({label:a.text(),value:a.val()}),"selected"===a.attr("selected")&&(f=b)}),c.replaceWith(angular.element(b)),{post:function(a,b,c,d){var g,h=0;g=a.select={show:!1,focused:!1,options:e,selectedItem:e[f],selectOption:function(a){h=jQuery.inArray(a,e),g.selectedItem=a,g.close(),d&&d.$setViewValue(a)},toggle:function(){g.show=!g.show},open:function(){g.show=!0},close:function(){g.show=!1},scrollIntoView:function(){var a,c;a=b.find(".cb-select-options"),c=b.find(".cb-select-option").eq(h),c.position().top+c.outerHeight()>a.height()?a.scrollTop(a.scrollTop()+c.outerHeight()+c.position().top-a.height()):c.position().top<0&&a.scrollTop(a.scrollTop()+c.position().top)},nextOption:function(){h<e.length-1&&(g.selectedItem=e[++h],g.scrollIntoView())},prevOption:function(){h>0&&(g.selectedItem=e[--h],g.scrollIntoView())},keypress:function(a){40===a.keyCode?g.nextOption():38===a.keyCode?g.prevOption():13===a.keyCode&&g.toggle()}},d&&(d.$render=function(){g.selectedItem=d.$viewValue}),b.on("click",function(){b.trigger("focus")}),b.on("focus",function(){a.$apply(function(){g.focused=!0,g.open()})}),b.on("focusout",function(){a.$apply(function(){g.focused=!1,g.close()})}),b.on("keydown",function(b){9!==b.keyCode&&b.preventDefault(),a.$apply(function(){g.keypress(b)})})}}}}}),angular.module("cbSlider",[]).directive("cbSlider",["$timeout",function(a){return{restrict:"A",scope:!0,require:"ngModel",link:function(b,c,d,e){var f,g,h,i,j,k=null;g={currentPage:0,perPage:1,collectionName:"pages",autoPlay:!1,initialDelay:7e3,delay:5e3,delayFlux:1e3},angular.extend(g,b.$eval(d.cbSlider)),i=b.slider={currentPage:g.currentPage,next:function(){h(),i.currentPage<i.lastPage&&(i.left=!0,i.currentPage++)},prev:function(){h(),i.currentPage>0&&(i.left=!1,i.currentPage--)},"goto":function(a){h(),a>=0&&a<=i.lastPage&&(i.left=i.currentPage<a?!0:!1,i.currentPage=a)}},e.$render=function(){var a=e.$viewValue;if(angular.isDefined(a)){if(i.lastPage=Math.ceil(a.length/g.perPage)-1,1===g.perPage)j=a;else{j=[];for(var b=0,c=a.length;c>b;b+=g.perPage)j.push(a.slice(b,b+g.perPage))}i[g.collectionName]=j}else i[g.collectionName]=null},f=function(){var b=(i.currentPage+1)%(i.lastPage+1);i.left=!0,i.currentPage=b,k=a(f,g.delay+Math.random()*g.delayFlux)},h=g.autoPlay?function(){null!==k&&(a.cancel(k),k=a(f,g.initialDelay))}:angular.noop,g.autoPlay===!0&&(k=a(f,g.initialDelay))}}}]),angular.module("cbTooltip",[]).directive("cbTooltip",["$compile",function(a){return{restrict:"A",scope:{title:"@title",content:"@content"},compile:function(){return{post:function(b,c,d){var e,f,g,h,i,j,k,l,m;e={tpl:'<div class="cb-tooltip" ng-style="style" ng-show="show"><header ng-if="title">{{title}}</header><section>{{content}}</section></div>',tplArrow:'<div class="arrow" ng-style="arrowStyle"></div>',position:"top",space:8,content:":)"},f=b,angular.extend(e,b.$eval(d.cbTooltip)),f.position=e.position,f.space=e.space,f.tpl=e.tpl,f.show=!1,f.tplArrow=e.tplArrow,j=angular.element(f.tpl),k=angular.element(f.tplArrow),l=a(j)(b),m=a(k)(b),c.addClass("cb-tooltip-active"),l.append(m),l.addClass(f.position),angular.element(document.body).append(l),g=f.show=function(){f.$apply(function(){f.show=!0}),i()},h=f.hide=function(){f.$apply(function(){f.show=!1})},i=function(){var a=c.offset(),b=c.outerWidth(!0),d=c.outerHeight(!0),e=l.outerWidth(!0),g=l.outerHeight(!0),h=m.outerWidth(!0),i=m.outerHeight(!0),j=0,k=0,n={};"top"===f.position?(j=a.top-g-f.space,n.left=e/2-h/2):"bottom"===f.position?(j=a.top+d+f.space,n.left=e/2-h/2):"left"===f.position?(k=a.left-e-f.space,n.top=g/2-i/2):"right"===f.position&&(k=a.left+b+f.space,n.top=g/2-i/2),("top"===f.position||"bottom"===f.position)&&(k=e>b?a.left-(e-b)/2:a.left+(b-e)/2),("left"===f.position||"right"===f.position)&&(j=g>d?a.top-(g-d)/2:a.top+(d-g)/2),f.$apply(function(){f.style={top:j,left:k},f.arrowStyle=n})},c.on("mouseenter",g),c.on("mouseleave",h),b.$on("$destroy",function(){l.remove()})}}}}}])}();